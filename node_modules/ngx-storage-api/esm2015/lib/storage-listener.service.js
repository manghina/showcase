import { Injectable } from '@angular/core';
import { defer, fromEvent } from 'rxjs';
import { share } from 'rxjs/operators';
import * as i0 from "@angular/core";
export class StorageListenerService {
    constructor() {
        /**
         * Listen to window storage events.
         *
         * @returns
         * An Observable which listens to window storage events,
         * shared to add a single handler to window object
         */
        this.storage$ = defer(() => fromEvent(window, 'storage').pipe(share()));
    }
}
StorageListenerService.ɵprov = i0.ɵɵdefineInjectable({ factory: function StorageListenerService_Factory() { return new StorageListenerService(); }, token: StorageListenerService, providedIn: "root" });
StorageListenerService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root',
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmFnZS1saXN0ZW5lci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LXN0b3JhZ2UtYXBpL3NyYy9saWIvc3RvcmFnZS1saXN0ZW5lci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQWMsTUFBTSxNQUFNLENBQUM7QUFDcEQsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLGdCQUFnQixDQUFDOztBQUt2QyxNQUFNLE9BQU8sc0JBQXNCO0lBSG5DO1FBSUU7Ozs7OztXQU1HO1FBQ00sYUFBUSxHQUE2QixLQUFLLENBQUMsR0FBRyxFQUFFLENBQ3ZELFNBQVMsQ0FBZSxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQ3pELENBQUM7S0FDSDs7OztZQWRBLFVBQVUsU0FBQztnQkFDVixVQUFVLEVBQUUsTUFBTTthQUNuQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGRlZmVyLCBmcm9tRXZlbnQsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHNoYXJlIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290Jyxcbn0pXG5leHBvcnQgY2xhc3MgU3RvcmFnZUxpc3RlbmVyU2VydmljZSB7XG4gIC8qKlxuICAgKiBMaXN0ZW4gdG8gd2luZG93IHN0b3JhZ2UgZXZlbnRzLlxuICAgKlxuICAgKiBAcmV0dXJuc1xuICAgKiBBbiBPYnNlcnZhYmxlIHdoaWNoIGxpc3RlbnMgdG8gd2luZG93IHN0b3JhZ2UgZXZlbnRzLFxuICAgKiBzaGFyZWQgdG8gYWRkIGEgc2luZ2xlIGhhbmRsZXIgdG8gd2luZG93IG9iamVjdFxuICAgKi9cbiAgcmVhZG9ubHkgc3RvcmFnZSQ6IE9ic2VydmFibGU8U3RvcmFnZUV2ZW50PiA9IGRlZmVyKCgpID0+XG4gICAgZnJvbUV2ZW50PFN0b3JhZ2VFdmVudD4od2luZG93LCAnc3RvcmFnZScpLnBpcGUoc2hhcmUoKSlcbiAgKTtcbn1cbiJdfQ==